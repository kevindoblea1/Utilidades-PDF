<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Utilidades PDF Inalma</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/svg+xml" href="favicon.svg?v=11">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png?v=11">
  <link rel="shortcut icon" href="favicon.ico?v=11">
  <meta name="theme-color" content="#157b2e">
</head>

<body>
  <div class="header">
    <img src="logo.png" class="logo" alt="Inalma">
    <h1>Utilidades PDF Inalma</h1>
    <p class="subtitle">Herramientas locales para documentos PDF</p>
  </div>

  <div class="tabs">
    <button class="tab-btn active" data-tab="compress">Compresión</button>
    <button class="tab-btn" data-tab="convert">PDF → Word</button>
    <button class="tab-btn" data-tab="merge">Fusionar</button>
    <button class="tab-btn" data-tab="img2pdf">Imagen → PDF</button><!-- NUEVO -->
  </div>

  <!-- Compresión -->
  <div id="panel-compress" class="panel active">
    <h2 class="panel-title"><span class="badge">Módulo activo</span> Compresor de PDF</h2>
    <div class="box" id="drop">
      <p>Arrastra tu PDF o selecciónalo</p>
      <input id="file" type="file" accept="application/pdf" />
      <div class="row">
        <label for="preset">Calidad:</label>
        <select id="preset">
          <option value="/screen">Muy comprimido (/screen)</option>
          <option value="/ebook" selected>Equilibrado (/ebook)</option>
          <option value="/printer">Alta calidad (/printer)</option>
        </select>
        <button id="go">Comprimir</button>
      </div>
      <p class="hint">Límite 50 MB. Se elimina del servidor tras la descarga.</p>
    </div>
  </div>

  <!-- PDF → Word -->
  <div id="panel-convert" class="panel">
    <h2 class="panel-title"><span class="badge">Módulo activo</span> PDF → Word (.docx)</h2>
    <div class="box" id="drop2">
      <p>Selecciona un PDF para convertir a Word</p>
      <input id="file2" type="file" accept="application/pdf" />
      <div class="row">
        <label><input type="checkbox" id="ocr"> Aplicar OCR (para PDFs escaneados)</label>
        <button id="go2">Convertir a Word</button>
      </div>
      <p class="hint">Usa LibreOffice. Marca OCR si tu PDF es un escaneo (imágenes).</p>
    </div>
  </div>

  <!-- Fusionar 2 PDFs -->
  <div id="panel-merge" class="panel">
    <h2 class="panel-title"><span class="badge">Módulo activo</span> Fusionar 2 PDFs</h2>
    <div class="box" id="drop3">
      <p>Selecciona dos archivos. Se unirán en este orden: <strong>Archivo 1 → Archivo 2</strong>.</p>

      <form id="mergeForm">
        <div class="file-grid">
          <label>Archivo 1 (inicio)
            <input type="file" name="file1" accept="application/pdf" required>
          </label>
          <label>Archivo 2 (final)
            <input type="file" name="file2" accept="application/pdf" required>
          </label>
        </div>
        <div class="row">
          <button id="goMerge" type="submit">Fusionar</button>
        </div>
      </form>

      <p class="hint">Límite 50 MB por archivo. Los temporales se eliminan tras la descarga.</p>
      <p id="mergeMsg" class="status"></p>
    </div>
  </div>

  <!-- Imagen → PDF -->
  <div id="panel-img2pdf" class="panel">
    <h2 class="panel-title"><span class="badge">Módulo activo</span> Imagen → PDF</h2>
    <div class="box" id="drop4">
      <p>Selecciona una imagen (JPG o PNG) y la pondremos en una página PDF.</p>
      <input id="imgFile" type="file" accept="image/jpeg,image/png" />
      <div class="row">
        <label for="page">Tamaño:</label>
        <select id="page">
          <option value="A4" selected>A4</option>
          <option value="LETTER">Carta (Letter)</option>
        </select>
        <label for="margin">Margen (mm):</label>
        <input id="margin" type="number" min="0" value="10" style="width:80px">
        <button id="goImgPdf">Convertir a PDF</button>
      </div>
      <p class="hint">La imagen se centra y escala manteniendo proporción. Límite 30 MB.</p>
    </div>
  </div>

  <script src="app.js?v=3"></script>
</body>
</html>
